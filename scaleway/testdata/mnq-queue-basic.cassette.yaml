---
version: 1
interactions:
- request:
    body: '{"name":"test-mnq-sqs-basic","protocol":"sqs_sns","project_id":"63a66ec9-a385-4194-bc15-04aa6921274a"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/mnq/v1alpha1/regions/fr-par/namespaces
    method: POST
  response:
    body: '{"created_at":"2023-04-11T09:33:27.562804406Z","endpoint":"https://sqs-sns.mnq.fr-par.scw.cloud","id":"ACEBUXQXOJ6S7GAZBZW6T434RYJL4Q6RMGCOVORI6KY2QCPZC5CFOIQP","name":"test-mnq-sqs-basic","project_id":"63a66ec9-a385-4194-bc15-04aa6921274a","protocol":"sqs_sns","region":"fr-par","updated_at":"2023-04-11T09:33:27.562804406Z"}'
    headers:
      Content-Length:
      - "333"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 11 Apr 2023 09:33:28 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 807d1d46-00f8-4c6e-9d99-ead0b383f285
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/mnq/v1alpha1/regions/fr-par/namespaces/ACEBUXQXOJ6S7GAZBZW6T434RYJL4Q6RMGCOVORI6KY2QCPZC5CFOIQP
    method: GET
  response:
    body: '{"created_at":"2023-04-11T09:33:27.562804Z","endpoint":"https://sqs-sns.mnq.fr-par.scw.cloud","id":"ACEBUXQXOJ6S7GAZBZW6T434RYJL4Q6RMGCOVORI6KY2QCPZC5CFOIQP","name":"test-mnq-sqs-basic","project_id":"63a66ec9-a385-4194-bc15-04aa6921274a","protocol":"sqs_sns","region":"fr-par","updated_at":"2023-04-11T09:33:27.562804Z"}'
    headers:
      Content-Length:
      - "327"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 11 Apr 2023 09:33:28 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 8636054e-87e7-4748-8294-3f79842f929d
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"namespace_id":"ACEBUXQXOJ6S7GAZBZW6T434RYJL4Q6RMGCOVORI6KY2QCPZC5CFOIQP","name":"test-creed-sqs-basic","permissions":{"can_publish":true,"can_receive":true,"can_manage":true}}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/mnq/v1alpha1/regions/fr-par/credentials
    method: POST
  response:
    body: '{"id":"1e8a817b-bdab-4353-b317-406bdfc46c96","name":"test-creed-sqs-basic","namespace_id":"ACEBUXQXOJ6S7GAZBZW6T434RYJL4Q6RMGCOVORI6KY2QCPZC5CFOIQP","protocol":"sqs_sns","sqs_sns_credentials":{"access_key":"40UGk0cA3W6XJI2lEBap","permissions":{"can_manage":true,"can_publish":true,"can_receive":true},"secret_key":"0Xa0YZBL85YV3wS1yeNpuGFp4pY8N6fdDFMs5v9wji5RgZAkZuu8LsxFK3sdPUA5"}}'
    headers:
      Content-Length:
      - "390"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 11 Apr 2023 09:33:28 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - ca21c645-999c-4be0-be5b-11967a96f29f
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/mnq/v1alpha1/regions/fr-par/credentials/1e8a817b-bdab-4353-b317-406bdfc46c96
    method: GET
  response:
    body: '{"id":"1e8a817b-bdab-4353-b317-406bdfc46c96","name":"test-creed-sqs-basic","namespace_id":"ACEBUXQXOJ6S7GAZBZW6T434RYJL4Q6RMGCOVORI6KY2QCPZC5CFOIQP","protocol":"sqs_sns","sqs_sns_credentials":{"access_key":"40UGk0cA3W6XJI2lEBap","permissions":{"can_manage":true,"can_publish":true,"can_receive":true},"secret_key":null}}'
    headers:
      Content-Length:
      - "328"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 11 Apr 2023 09:33:28 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 2ebc0061-cf37-47b6-a966-1bacbfb6644d
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: Action=CreateQueue&Attribute.1.Name=DelaySeconds&Attribute.1.Value=90&Attribute.2.Name=MaximumMessageSize&Attribute.2.Value=2048&Attribute.3.Name=MessageRetentionPeriod&Attribute.3.Value=86400&Attribute.4.Name=ReceiveMessageWaitTimeSeconds&Attribute.4.Value=10&Attribute.5.Name=RedrivePolicy&Attribute.5.Value=%7B%22maxReceiveCount%22%3A4%7D&Attribute.6.Name=VisibilityTimeout&Attribute.6.Value=30&QueueName=terraform-example-queue&Version=2012-11-05
    form:
      Action:
      - CreateQueue
      Attribute.1.Name:
      - DelaySeconds
      Attribute.1.Value:
      - "90"
      Attribute.2.Name:
      - MaximumMessageSize
      Attribute.2.Value:
      - "2048"
      Attribute.3.Name:
      - MessageRetentionPeriod
      Attribute.3.Value:
      - "86400"
      Attribute.4.Name:
      - ReceiveMessageWaitTimeSeconds
      Attribute.4.Value:
      - "10"
      Attribute.5.Name:
      - RedrivePolicy
      Attribute.5.Value:
      - '{"maxReceiveCount":4}'
      Attribute.6.Name:
      - VisibilityTimeout
      Attribute.6.Value:
      - "30"
      QueueName:
      - terraform-example-queue
      Version:
      - "2012-11-05"
    headers:
      Content-Length:
      - "450"
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      User-Agent:
      - aws-sdk-go/1.44.237 (go1.19; darwin; amd64)
      X-Amz-Date:
      - 20230411T093456Z
    url: http://sqs-sns.mnq.fr-par.scw.cloud/
    method: POST
  response:
    body: <ErrorResponse xmlns=""><Error><Type>Sender</Type><Code>AccessDeniedException</Code><Message>You
      do not have sufficient access to perform this action.</Message></Error><RequestId>tx55ac7d75-f0ff-44aa-9b91-cc2d8501f8e5</RequestId></ErrorResponse>
    headers:
      Content-Length:
      - "245"
      Content-Type:
      - text/xml; charset=UTF-8
      Date:
      - Tue, 11 Apr 2023 09:34:57 GMT
    status: 400 Bad Request
    code: 400
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/mnq/v1alpha1/regions/fr-par/credentials/1e8a817b-bdab-4353-b317-406bdfc46c96
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 11 Apr 2023 09:35:17 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - f78dd953-6eae-4a54-a4e5-22c8e725c6f0
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/mnq/v1alpha1/regions/fr-par/namespaces/ACEBUXQXOJ6S7GAZBZW6T434RYJL4Q6RMGCOVORI6KY2QCPZC5CFOIQP
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 11 Apr 2023 09:35:18 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 07acc756-d300-4bff-b7a4-a12ff1b6db32
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/mnq/v1alpha1/regions/fr-par/credentials/1e8a817b-bdab-4353-b317-406bdfc46c96
    method: DELETE
  response:
    body: '{"message":"resource is not found","resource":"credential","resource_id":"1e8a817b-bdab-4353-b317-406bdfc46c96","type":"not_found"}'
    headers:
      Content-Length:
      - "131"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 11 Apr 2023 09:35:18 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - bf2ea701-b390-4069-a0bd-cb9c461e0729
    status: 404 Not Found
    code: 404
    duration: ""
